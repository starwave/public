<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfCustomControlLib" x:Class="WpfCustomControlLib.CustomConfigDialog"
        Title="Custom Config" Height="570" Width="370" ResizeMode="NoResize" ShowInTaskbar="False"  WindowStartupLocation="Manual" ContentRendered="windowContentRendered"
    >
    <Window.Resources>
        <Style x:Key="myHeaderStyle" TargetType="{x:Type GridViewColumnHeader}">
            <Setter Property="Visibility" Value="Collapsed" />
        </Style>
        <local:ForegroundConverter x:Key="ForegroundConverter"></local:ForegroundConverter>
        <ContextMenu x:Key="WordStyleMenu">
            <MenuItem Header="Root" Tag="{Binding Word}" CommandParameter="0" Click="customWordsListView_WordType_MenuItemClick">
                <MenuItem.Icon>
                    <Image Source="resource/folder.png"/>
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem Header="Allow" Tag="{Binding Word}" CommandParameter="1" Click="customWordsListView_WordType_MenuItemClick">
                <MenuItem.Icon>
                    <Image Source="resource/green_light.png"/>
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem Header="Filter" Tag="{Binding Word}" CommandParameter="2" Click="customWordsListView_WordType_MenuItemClick">
                <MenuItem.Icon>
                    <Image Source="resource/red_light.png"/>
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem Header="Reserved" Tag="{Binding Word}" CommandParameter="3" Click="customWordsListView_WordType_MenuItemClick">
                <MenuItem.Icon>
                    <Image Source="resource/gray_light.png"/>
                </MenuItem.Icon>
            </MenuItem>
        </ContextMenu>
    </Window.Resources>
    <Grid>
        <TextBox x:Name="_customConfigStringTextBox" HorizontalAlignment="Left" Height="53" Margin="10,10,0,0" TextWrapping="Wrap" Text="" VerticalAlignment="Top" Width="333" IsReadOnly="True"/>
        <Button x:Name="_saveToLibraryBtn" Content="Save to Library" HorizontalAlignment="Left" Margin="10,79,0,0" VerticalAlignment="Top" Width="119" Height="30" Click="saveToLibraryBtnClicked"/>
        <Button x:Name="_addBtn" Content="Add" HorizontalAlignment="Right" Margin="0,79,96,0" VerticalAlignment="Top" Width="64" Height="30" Click="addBtnClicked"/>
        <Button x:Name="_clearBtn" Content="Clear" HorizontalAlignment="Right" Margin="0,79,21,0" VerticalAlignment="Top" Width="64" Height="30" Click="clearBtnClicked"/>
        <ListView x:Name="_themeLibsListView" ItemsSource="{Binding DataContext, RelativeSource={RelativeSource Self}}" HorizontalAlignment="Left" Margin="10,123,0,0" VerticalAlignment="Top" Height="357" Width="157" SelectionMode="Single" SelectionChanged="themeLibsListView_SelectionChanged" >
            <ListView.ItemTemplate>
                <DataTemplate>
                    <WrapPanel>
                        <Label Width="95" BorderThickness="0">
                            <TextBlock TextWrapping="Wrap" Text="{Binding Label}" />
                            <Label.Style>
                                <Style TargetType="{x:Type Label}">
                                    <Setter Property="Background" Value="{x:Null}"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListViewItem}}, Path=IsSelected}" Value="True">
                                            <Setter Property="Background" Value="#FFFC99"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Label.Style>
                        </Label>
                        <Image Tag="{Binding Label}" Source="resource/trash.png" Width="20" Height="20" PreviewMouseLeftButtonDown="themeLibsListView_Trash_MouseButtonDown">
                            <Image.Style>
                                <Style TargetType="{x:Type Image}">
                                    <Setter Property="Visibility" Value="Visible" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Label}" Value="Current">
                                            <Setter Property="Visibility" Value="Hidden" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Image.Style>
                        </Image>
                    </WrapPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <ListView x:Name="_customWordsListView" ItemsSource="{Binding DataContext, RelativeSource={RelativeSource Self}}"  HorizontalAlignment="Left" Margin="172,123,0,0" Height="357" Width="171" SelectionMode="Single" VerticalAlignment="Top">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <WrapPanel>
                        <Button Tag="{Binding Word}" Width="24" Height="24" BorderThickness="0" Background="{x:Null}" BorderBrush="{x:Null}" Click="customWordsListView_WordType_Click">
                            <Image Width="20" Height="20">
                                <Image.Style>
                                    <Style TargetType="{x:Type Image}">
                                        <Setter Property="Source" Value="resource/green_light.png" />
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding WordType}" Value="0">
                                                <Setter Property="Source" Value="resource/folder.png" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding WordType}" Value="1">
                                                <Setter Property="Source" Value="resource/green_light.png" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding WordType}" Value="2">
                                                <Setter Property="Source" Value="resource/red_light.png" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding WordType}" Value="3">
                                                <Setter Property="Source" Value="resource/gray_light.png" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Image.Style>
                            </Image>
                        </Button>
                        <Label Width="95" VerticalContentAlignment="Stretch"  BorderThickness="0"
                               Foreground="{Binding WordType, Converter={StaticResource ForegroundConverter}, ConverterParameter={} }">
                            <TextBlock TextWrapping="Wrap" Text="{Binding Word}" />
                            <Label.Style>
                                <Style TargetType="{x:Type Label}">
                                    <Setter Property="Background" Value="White"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListViewItem}}, Path=IsSelected}" Value="True">
                                            <Setter Property="Background" Value="#FFFC99"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Label.Style>
                        </Label>
                        <Image Tag="{Binding Word}" Source="resource/trash.png" Width="20" Height="20" PreviewMouseLeftButtonDown="customWordsListView_Trash_MouseButtonDown">
                            <Image.Style>
                                <Style TargetType="{x:Type Image}">
                                    <Setter Property="Visibility" Value="Visible" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding WordType}" Value="3">
                                            <Setter Property="Visibility" Value="Hidden" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Image.Style>

                        </Image>
                    </WrapPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <Button x:Name="_okBtn" Content="OK" HorizontalAlignment="Right" Margin="0,494,96,0" VerticalAlignment="Top" Width="64" Height="30" Click="okBtnClicked" />
        <Button x:Name="_cancelBtn" Content="Cancel" HorizontalAlignment="Right" Margin="0,494,21,0" VerticalAlignment="Top" Width="64" Height="30" Click="cancelButtonClicked"/>
    </Grid>
</Window>
